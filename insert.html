<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<style>
    .flex-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    .flex-container>div {
        min-width: 300px;
        background-color: #30303060;
        margin: 10px;
        padding: 20px;
    }
</style>

<center>
    <h1>QuickDesk Pricing Calculator</h1>
    <hr>
    <br>
    <div class="flex-container">
        <div>
            <h2>Resources</h2>
            <label for="input-desks">
                <input id="input-desks" class="mdl-slider mdl-js-slider" type="range" min="0" max="12" value="2">
                <p>Desks: <span id="output-desks"></span></p>
            </label>
            <label for="input-rooms">
                <input id="input-rooms" class="mdl-slider mdl-js-slider" type="range" min="0" max="12" value="2">
                <p>Rooms: <span id="output-rooms"></span></p>
            </label>
            <label for="input-receptions">
                <input id="input-receptions" class="mdl-slider mdl-js-slider" type="range" min="0" max="12" value="2">
                <p>Receptions: <span id="output-receptions"></span></p>
            </label>
            <br>
            <h4>Packages needed: <span id="output-packages"></span></h4>


        </div>
        <div>
            <h2>Options</h2>

            <label id="check-whitelabel-label" class="mdl-switch mdl-js-switch mdl-js-ripple-effect"
                for="check-whitelabel">
                <span class="mdl-switch__label"></span>
                <input id="check-whitelabel" class="mdl-switch__input" type="checkbox" name="whitelabel" value="true">
                <strong>White Labeling</strong>
                <p>Custom logo and colour scheme</p>
                <!-- <span class="mdl-tooltip mdl-tooltip--large mdl-tooltip--right" for="check-whitelabel-label">Custom logo and colour scheme</span> -->
            </label>
            <br>
            <br>
            <br>
            <label id="check-stickers-label" class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="check-stickers">
                <span class="mdl-switch__label"></span>
                <input id="check-stickers" class="mdl-switch__input" type="checkbox" name="stickers" value="true">
                <strong>Printed Stickers</strong>
                <p>Scratch resistant vinyl stickers</p>
                <!-- <span class="mdl-tooltip mdl-tooltip--large mdl-tooltip--right" for="check-stickers-label">Scratch resistant vinyl stickers</span> -->
            </label>
            <br>
            <br>
            <br>
            <label id="check-installation-label" class="mdl-switch mdl-js-switch mdl-js-ripple-effect"
                for="check-installation">
                <span class="mdl-switch__label"></span>
                <input id="check-installation" class="mdl-switch__input" type="checkbox" name="installation"
                    value="true">
                <strong>On-site Installation</strong>
                <p>Include installation &#40;major cities
                    only&#41;</p>
                <!-- <span class="mdl-tooltip mdl-tooltip--large mdl-tooltip mdl-tooltip--right" for="check-installation-label">Include installation &#40;major cities
                        only&#41;</span> -->
            </label>
            <br>
            <br>
            <br>
        </div>
        <div>
            <h2>Total</h2>
            <h4>
                Price ZAR <span id="output-price-total"></span> / month
            </h4>
            <p>
                <span id="output-price-per"></span>
            </p>
        </div>
    </div>


    <br>
    <br>
    <br>



    <!-- <button id="go-button">
            Let's Go!
        </button> -->

</center>


<script>

    const deskValues = ["I'm not sure.", 100, 200, 300, 400, 500, 1000, 1500, 2000, 2500, 3000, 4000, "5000+"];
    const roomValues = ["I'm not sure.", 10, 20, 30, 40, 50, 100, 150, 200, 250, 300, "500+"];
    const receptionValues = ["I'm not sure.", 2, 4, 6, 8, 10, 20, 30, 40, 50, 60, 80, 100, "100+"];

    var packageCount = 0;

    function updateElement(inputID, outputID, values) {
        $('#' + outputID).html(values[$('#' + inputID).val()]);
    };

    function updatePrice() {
        // packageCount = $('#output-packages').val();
        var totalPrice = (packageCount * 3000);
        var extras = 0;
        if ($('#check-whitelabel').prop("checked")) extras += 5000;
        if ($('#check-stickers').prop("checked")) extras += (100 * packageCount);
        if ($('#check-installation').prop("checked")) extras += (2000 * (packageCount / 2));
        totalPrice += extras;
        $('#output-price-total').html(totalPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));

        var desks = deskValues[$('#input-desks').val()];
        var pricePer = "";
        var pricePerStr = ""
        if (desks == "5000+") {
            pricePerStr = "Contact us for pricing!"
        } else if (desks == "I'm not sure.") {
            pricePerStr = "Please select desk quatity."
        } else {
            pricePer = totalPrice / desks;
            var pricePerStr = "Cost per desk: ZAR " + pricePer.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " / month"
        }
        $('#output-price-per').html(pricePerStr);

    };

</script>
<script>
    function updatePackages() {
        packageCount = Math.max(
            $('#input-desks').val(),
            $('#input-rooms').val(),
            $('#input-receptions').val()
        );
        $('#output-packages').html(packageCount); // TODO make this a values call too, packages still linear
    };
    $('#input-desks')[0].oninput = function () {
        updateElement('input-desks', 'output-desks', deskValues);
        updatePackages();
        updatePrice();
    };

    $('#input-rooms')[0].oninput = function () {
        updateElement('input-rooms', 'output-rooms', roomValues);
        updatePackages();
        updatePrice();
    };

    $('#input-receptions')[0].oninput = function () {
        updateElement('input-receptions', 'output-receptions', receptionValues);
        updatePackages();
        updatePrice();
    };
    $('#input-desks')[0].oninput();
    $('#input-rooms')[0].oninput();
    $('#input-receptions')[0].oninput();
    $('#check-whitelabel')[0].oninput = function () {
        updatePrice();
    };
    $('#check-stickers')[0].oninput = function () {
        updatePrice();
    };
    $('#check-installation')[0].oninput = function () {
        updatePrice();
    };

</script>